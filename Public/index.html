<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>Macro lista</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <style>
        body { font-family: Arial; padding: 20px; }
        ul { list-style: none; padding: 0; }
        li { margin: 5px 0; background: #f1f1f1; padding: 8px; border-radius: 6px; }
    </style>
</head>
<body>
<div class="grid grid-cols-2 gap-4">
    <div class="row m-1 text-center">
        <div class="card text-bg-primary col-md-6 text-center">
            <div class="card-header h1">Customers count</div>
            <div class="card-body row m-4">
                <h5 class="h2 text-center col-md-6" id="counter">0</h5>
                <button class="btn text-bg-danger col-md-6 " onclick="ResetCounter()"><span class="h2">RESET</span></button>
                <label for="CounterName"></label><input type="text" id="CounterName">
                <button class="btn text-bg-danger col-md-6 " onclick="AddCounter()"><span class="h2">Add counter</span></button>
            </div>
        </div>
        <div class="card text-bg-primary col-md-6 text-center" >
            <div class="card-header h1">Riasztás indítása</div>
            <div class="card-body row m-4">
                <h5 class="h2 text-center col-md-6">Lépcső: </h5>
                <button class="btn btn-warning col-md-6" onclick="IncreaseCounter()"><span class="h2">Increase</span></button>
                <button class="btn btn-warning col-md-6" onclick="DecreaseCounter()"><span class="h2">Decrease</span></button>
            </div>
        </div>
    </div>
    <div class="row m-4">

    </div>
</div>
<script crossorigin="anonymous">

    const localhostAdd = 'http://localhost';

    let address = localhostAdd +':8100';

    async function Counter()
    {
        const res = await fetch(address + '/counters/customersCounter');
        const data = await res.json();
        const count = document.getElementById('counter');
        count.textContent = data.value;
    }

    async function ResetCounter()
    {
        const res = await fetch(address + '/reset/customersCounter', { method: 'POST' });
        const data = await res.json();
        document.getElementById('counter').textContent = data.value;
    }

    async function IncreaseCounter() {
        const res = await fetch(address + '/increasecounter/customersCounter', {method: 'POST'});
        const data = await res.json();
    }

    async function DecreaseCounter()
    {
        const res = await fetch(address + '/decreasecounter/customersCounter',{
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({})
        });
        const data = await res.json();
    }

    async function AddCounter()
    {
        let name = document.getElementById('CounterName').value.trim();
        const res = await fetch(address + '/counters/add/' + name, {method: 'POST'});
    }


    setInterval(Counter, 1000);
</script>
</body>
</html>